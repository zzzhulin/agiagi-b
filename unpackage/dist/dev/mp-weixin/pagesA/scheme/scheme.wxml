<view class="scheme-page"><navbar vue-id="4f6d2eca-1" title="膳食方案" backgroundColor="{{navbarBgColor}}" bind:__l="__l"></navbar><picker value="{{member_index}}" range="{{family_members}}" range-key="name" data-event-opts="{{[['change',[['selectMember',['$event']]]]]}}" bindchange="__e"><flexbox vue-id="4f6d2eca-2" gap="20" className="user-content" bind:__l="__l" vue-slots="{{['default']}}"><flexbox vue-id="{{('4f6d2eca-3')+','+('4f6d2eca-2')}}" align="left" gap="12" className="user-info" bind:__l="__l" vue-slots="{{['default']}}"><icon src="{{headimg}}" size="48" type="remote" circle="{{true}}" className="user-avatar"></icon><flexbox vue-id="{{('4f6d2eca-4')+','+('4f6d2eca-3')}}" direction="column" gap="4" bind:__l="__l" vue-slots="{{['default']}}"><typography vue-id="{{('4f6d2eca-5')+','+('4f6d2eca-4')}}" fontSize="18" bold="{{true}}" bind:__l="__l" vue-slots="{{['default']}}">{{member_name+"（"+relationship+"）"}}</typography><typography vue-id="{{('4f6d2eca-6')+','+('4f6d2eca-4')}}" color="gray1" bind:__l="__l" vue-slots="{{['default']}}">{{disease_name||'暂无疾病信息'}}</typography></flexbox></flexbox><icon src="b_arrow-down.png" size="24"></icon></flexbox></picker><block wx:if="{{scheme_name}}"><flexbox vue-id="4f6d2eca-7" direction="column" gap="24" className="scheme-container" bind:__l="__l" vue-slots="{{['default']}}"><flexbox vue-id="{{('4f6d2eca-8')+','+('4f6d2eca-7')}}" direction="column" gap="12" bind:__l="__l" vue-slots="{{['default']}}"><flexbox vue-id="{{('4f6d2eca-9')+','+('4f6d2eca-8')}}" align="justify" bind:__l="__l" vue-slots="{{['default']}}"><typography vue-id="{{('4f6d2eca-10')+','+('4f6d2eca-9')}}" fontSize="22" color="primary" bold="{{true}}" bind:__l="__l" vue-slots="{{['default']}}">{{scheme_name}}</typography><flexbox vue-id="{{('4f6d2eca-11')+','+('4f6d2eca-9')}}" align="center" data-event-opts="{{[['^tap',[['navigateTo',['/pagesA/scheme/list?id='+member_id+'&memberId='+family_member_id]]]]]}}" bind:tap="__e" bind:__l="__l" vue-slots="{{['default']}}"><icon src="b_toggle-gray.png" size="20"></icon><typography vue-id="{{('4f6d2eca-12')+','+('4f6d2eca-11')}}" color="gray1" bind:__l="__l" vue-slots="{{['default']}}">更换方案</typography></flexbox></flexbox><flexbox vue-id="{{('4f6d2eca-13')+','+('4f6d2eca-8')}}" direction="column" className="form-input" bind:__l="__l" vue-slots="{{['default']}}"><textarea auto-height="{{true}}" placeholder="输入你的需求，AI将在已选方案基础上进行策略调整..." placeholder-class="placeholder" data-event-opts="{{[['input',[['__set_model',['','diet_scheme_customized','$event',[]]]]]]}}" value="{{diet_scheme_customized}}" bindinput="__e"></textarea><flexbox vue-id="{{('4f6d2eca-14')+','+('4f6d2eca-13')}}" align="center" className="confirm-btn" data-event-opts="{{[['^tap',[['generateRecipe']]]]}}" bind:tap="__e" bind:__l="__l" vue-slots="{{['default']}}"><typography vue-id="{{('4f6d2eca-15')+','+('4f6d2eca-14')}}" color="white" bold="{{true}}" bind:__l="__l" vue-slots="{{['default']}}">生成食谱</typography></flexbox></flexbox></flexbox><block wx:if="{{$root.g0}}"><block><flexbox vue-id="{{('4f6d2eca-16')+','+('4f6d2eca-7')}}" align="justify" bind:__l="__l" vue-slots="{{['default']}}"><typography vue-id="{{('4f6d2eca-17')+','+('4f6d2eca-16')}}" fontSize="22" bold="{{true}}" bind:__l="__l" vue-slots="{{['default']}}">生成的食谱</typography><flexbox vue-id="{{('4f6d2eca-18')+','+('4f6d2eca-16')}}" gap="8" bind:__l="__l" vue-slots="{{['default']}}"><flexbox vue-id="{{('4f6d2eca-19')+','+('4f6d2eca-18')}}" align="center" gap="2" data-event-opts="{{[['^tap',[['onAnalysis']]]]}}" bind:tap="__e" bind:__l="__l" vue-slots="{{['default']}}"><icon src="b_leaf.png" size="20"></icon><typography vue-id="{{('4f6d2eca-20')+','+('4f6d2eca-19')}}" color="gray1" bind:__l="__l" vue-slots="{{['default']}}">营养分析</typography></flexbox><flexbox vue-id="{{('4f6d2eca-21')+','+('4f6d2eca-18')}}" align="center" gap="2" data-event-opts="{{[['^tap',[['navigateTo',['/pagesA/cookbook/cookbook?id='+member_id+'&memberId='+family_member_id]]]]]}}" bind:tap="__e" bind:__l="__l" vue-slots="{{['default']}}"><icon src="b_file.png" size="20"></icon><typography vue-id="{{('4f6d2eca-22')+','+('4f6d2eca-21')}}" color="gray1" bind:__l="__l" vue-slots="{{['default']}}">历史食谱</typography></flexbox></flexbox></flexbox><flexbox vue-id="{{('4f6d2eca-23')+','+('4f6d2eca-7')}}" direction="column" gap="16" bind:__l="__l" vue-slots="{{['default']}}"><block wx:for="{{$root.l1}}" wx:for-item="day" wx:for-index="index" wx:key="index"><flexbox vue-id="{{('4f6d2eca-24-'+index)+','+('4f6d2eca-23')}}" direction="column" gap="12" bind:__l="__l" vue-slots="{{['default']}}"><typography vue-id="{{('4f6d2eca-25-'+index)+','+('4f6d2eca-24-'+index)}}" fontSize="16" bold="{{true}}" bind:__l="__l" vue-slots="{{['default']}}">{{"第"+(index+1)+"天"}}</typography><flexbox vue-id="{{('4f6d2eca-26-'+index)+','+('4f6d2eca-24-'+index)}}" direction="column" className="table" bind:__l="__l" vue-slots="{{['default']}}"><block wx:for="{{day.l0}}" wx:for-item="row" wx:for-index="__i0__" wx:key="$orig"><flexbox vue-id="{{('4f6d2eca-27-'+index+'-'+__i0__)+','+('4f6d2eca-26-'+index)}}" className="tr" bind:__l="__l" vue-slots="{{['default']}}"><flexbox vue-id="{{('4f6d2eca-28-'+index+'-'+__i0__)+','+('4f6d2eca-27-'+index+'-'+__i0__)}}" align="center" className="td" bind:__l="__l" vue-slots="{{['default']}}"><typography vue-id="{{('4f6d2eca-29-'+index+'-'+__i0__)+','+('4f6d2eca-28-'+index+'-'+__i0__)}}" color="gray2" bind:__l="__l" vue-slots="{{['default']}}">{{rowsMap[row.$orig]}}</typography></flexbox><flexbox vue-id="{{('4f6d2eca-30-'+index+'-'+__i0__)+','+('4f6d2eca-27-'+index+'-'+__i0__)}}" align="left" className="td" bind:__l="__l" vue-slots="{{['default']}}"><typography vue-id="{{('4f6d2eca-31-'+index+'-'+__i0__)+','+('4f6d2eca-30-'+index+'-'+__i0__)}}" className="meal-text" bind:__l="__l" vue-slots="{{['default']}}">{{row.g1}}</typography></flexbox></flexbox></block></flexbox></flexbox></block></flexbox></block></block></flexbox></block><block wx:if="{{isLoading}}"><flexbox vue-id="4f6d2eca-32" align="center" direction="column" gap="30" className="empty-content" bind:__l="__l" vue-slots="{{['default']}}"><flexbox vue-id="{{('4f6d2eca-33')+','+('4f6d2eca-32')}}" align="center" direction="column" bind:__l="__l" vue-slots="{{['default']}}"><typography vue-id="{{('4f6d2eca-34')+','+('4f6d2eca-33')}}" color="primary" bind:__l="__l" vue-slots="{{['default']}}">暂无食谱数据，</typography><typography vue-id="{{('4f6d2eca-35')+','+('4f6d2eca-33')}}" color="primary" bind:__l="__l" vue-slots="{{['default']}}">请为客户制定生成</typography></flexbox></flexbox></block><block wx:if="{{isEmpty}}"><flexbox vue-id="4f6d2eca-36" direction="column" align="center" className="empty-scheme" bind:__l="__l" vue-slots="{{['default']}}"><icon src="b_empty-result.png" size="128"></icon><flexbox vue-id="{{('4f6d2eca-37')+','+('4f6d2eca-36')}}" direction="column" align="center" gap="12" bind:__l="__l" vue-slots="{{['default']}}"><flexbox vue-id="{{('4f6d2eca-38')+','+('4f6d2eca-37')}}" direction="column" align="center" bind:__l="__l" vue-slots="{{['default']}}"><typography vue-id="{{('4f6d2eca-39')+','+('4f6d2eca-38')}}" color="gray2" bind:__l="__l" vue-slots="{{['default']}}">该成员还没有制定</typography><typography vue-id="{{('4f6d2eca-40')+','+('4f6d2eca-38')}}" color="gray2" bind:__l="__l" vue-slots="{{['default']}}">膳食方案</typography></flexbox><flexbox vue-id="{{('4f6d2eca-41')+','+('4f6d2eca-37')}}" align="center" className="select-btn" data-event-opts="{{[['^tap',[['navigateTo',['/pagesA/scheme/list?id='+member_id+'&memberId='+family_member_id]]]]]}}" bind:tap="__e" bind:__l="__l" vue-slots="{{['default']}}"><typography vue-id="{{('4f6d2eca-42')+','+('4f6d2eca-41')}}" fontSize="16" color="white" bold="{{true}}" bind:__l="__l" vue-slots="{{['default']}}">选择方案</typography></flexbox></flexbox></flexbox></block><block wx:if="{{$root.g2}}"><flexbox vue-id="4f6d2eca-43" gap="9" className="tabbar-content" bind:__l="__l" vue-slots="{{['default']}}"><flexbox vue-id="{{('4f6d2eca-44')+','+('4f6d2eca-43')}}" align="center" gap="4" className="adjust-btn" data-event-opts="{{[['^tap',[['openPopup',['speechPopup']]]]]}}" bind:tap="__e" bind:__l="__l" vue-slots="{{['default']}}"><icon src="b_microphone-primary.png" size="24"></icon><typography vue-id="{{('4f6d2eca-45')+','+('4f6d2eca-44')}}" fontSize="18" color="primary" bind:__l="__l" vue-slots="{{['default']}}">调整食谱</typography></flexbox><block wx:if="{{recipe_data.is_draft}}"><flexbox vue-id="{{('4f6d2eca-46')+','+('4f6d2eca-43')}}" align="center" className="push-btn" data-event-opts="{{[['^tap',[['onPush']]]]}}" bind:tap="__e" bind:__l="__l" vue-slots="{{['default']}}"><typography vue-id="{{('4f6d2eca-47')+','+('4f6d2eca-46')}}" fontSize="18" color="white" bold="{{true}}" bind:__l="__l" vue-slots="{{['default']}}">直接推送</typography></flexbox></block><block wx:else><flexbox vue-id="{{('4f6d2eca-48')+','+('4f6d2eca-43')}}" align="center" className="push-btn pushed" bind:__l="__l" vue-slots="{{['default']}}"><typography vue-id="{{('4f6d2eca-49')+','+('4f6d2eca-48')}}" fontSize="18" color="white" bold="{{true}}" bind:__l="__l" vue-slots="{{['default']}}">已推送</typography></flexbox></block></flexbox></block><speech class="vue-ref" bind:confirm="__e" vue-id="4f6d2eca-50" data-ref="speechPopup" data-event-opts="{{[['^confirm',[['setText']]]]}}" bind:__l="__l"></speech></view>